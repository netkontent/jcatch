function jCatchListener(){var script_src,user_id=(script_src=document.getElementById("jcatch").src,decodeURIComponent(script_src.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent("u").replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))),_domain=window.location.hostname,_token=null,_errors=[],_api=null,_queue=[];function jCatchAPI(user_id,domain){function auth(){if(_token)return _token;for(var token=null,cookies=decodeURIComponent(document.cookie).split(";"),i=0;i<cookies.length;i++){for(var c=cookies[i];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf("_jcatch_=")&&(token=c.substring("_jcatch_=".length,c.length))}return token}function log(_err){auth()?ajax(function(res){},_err):_queue.push(_err)}function ajax(callback,data,url,method){url=url||"http://jcatch.io/api/log/add/",method=method||"POST",data=data||null;var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4===this.readyState&&200==this.status&&"function"==typeof callback)return callback(this.response)},xhr.open(method,url,!0),xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"),"POST"===method&&"string"!=typeof data&&(data=JSON.stringify({user:user_id,domain:_domain,error:data.error})),xhr.send(data)}return auth()||ajax(function(res){var _res=JSON.parse(res);_token=_res.token;var date=new Date;date.setTime(date.getTime()+864e5);var expires="expires="+date.toUTCString();document.cookie="_jcatch_="+_token+";"+expires+";path=/",_queue.length&&_queue.forEach(function(_err){log(_err),delete _queue[_err]})},{user:user_id,domain:domain},"http://jcatch.io/api/auth/"),{log:log}}!function(){if(!user_id)return console.log("jCatch ERROR: user id not found");window.addEventListener("error",function(error){!function(event){var client=function(mode,keys){mode=mode||"",keys=keys||{};var defaults=["userAgent"],nav=window.navigator,client={};switch(mode){case"all":for(var key in nav)client[key]=nav[key];break;default:for(var i=0,size=defaults.length;i<size;i++)defaults[i]in nav&&(client[defaults[i]]=nav[defaults[i]])}return client}(),error_data={eid:_errors.length,error:{url:event.filepath,line:event.lineno,column:event.colno,message:event.message,file:event.filename,time:(new Date).getTime(),client:{userAgent:client.userAgent,cookie:!0}}};console.log(error_data),_errors.push(error_data),_api||(_api=new jCatchAPI(user_id,_domain));_api.log(error_data)}(error)})}()}jCatchListener();